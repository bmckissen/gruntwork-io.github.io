<script>window.pricing = {{ site.data.pricing | jsonify }}</script>
<script src="{{ site.assets_base_url }}js/main.js"></script>
{% if page.custom_js %}
  {% for js_file in page.custom_js %}
  <script src='/assets/js/{{ js_file }}.js' type="text/javascript"></script>
  {% endfor %}
{% elsif layout.custom_js %}
  {% for js_file in layout.custom_js %}
    <script src='/assets/js/{{ js_file }}.js' type="text/javascript"></script>
  {% endfor %}
{% endif %}
{% if site.ga_tracker %}

<script>
  window.ga =
    window.ga ||
    function() {
      (ga.q = ga.q || []).push(arguments);
    };
  ga.l = +new Date();

  ga("create", "{{ site.ga_tracker }}", "auto");
  ga("require", "eventTracker");
  ga("require", "maxScrollTracker");
  ga("require", "outboundFormTracker");
  ga("require", "outboundLinkTracker");
  ga("send", "pageview");

  // Google Analytics Event Tracking for IAC Page A/B Tests
  const IACVersion = getCookiebyName("IACLibraryVersion");

  const createEventAction = (tag) => {
    return IACVersion ? `${tag} (${IACVersion})` : tag;
  }

  const gaEventBaseObject = {
    hitType: "event",
    eventCategory: "CTA Clicks",
    eventValue: 1
  }

  $("a").on("click", function() {
    const href = $(this).attr("href");
    if (!href) return;

    if (href.includes("/contact")) {
      const tag = "Click Contact Us";
      const eventAction = createEventAction(tag);
      ga("send", {
        ...gaEventBaseObject,
        eventAction,
        eventLabel: "User went to Contact Page"
      });
    } else if (href.includes("/pricing")) {
      const tag = "Click Buy Now";
      const eventAction = createEventAction(tag);
      ga("send", {
        ...gaEventBaseObject,
        eventAction,
        eventLabel: "User went to Pricing Page"
      });
    } else if (href.includes("/checkout")) {
      const tag = "Select Plan";
      const eventAction = createEventAction(tag);
      ga("send", {
        ...gaEventBaseObject,
        eventAction,
        eventLabel: "User selected Plan on Pricing Page"
      });
    }
  });

  $("#submit-button").on("click", () => {
    const tag = "Submit Contact Form";
    const eventAction = createEventAction(tag);
    ga("send", {
      ...gaEventBaseObject,
      eventAction,
      eventLabel: "User submitted contact form"
    });
  });

  $("#checkout-btn").on("click", () => {
    const tag = "Click Checkout";
    const eventAction = createEventAction(tag);
    ga("send", {
      ...gaEventBaseObject,
      eventAction,
      eventLabel: "User clicked checkout button"
    });
  });

  $("#pricing-cta-aws").on("click", () => {
    const tag = "Select AWS";
    const eventAction = createEventAction(tag);
    ga("send", {
      ...gaEventBaseObject,
      eventAction,
      eventLabel: "User selected AWS plan"
    });
  });

  $("#pricing-cta-gcp").on("click", () => {
    const tag = "Select GCP";
    const eventAction = createEventAction(tag);
    ga("send", {
      ...gaEventBaseObject,
      eventAction,
      eventLabel: "User selected GCP plan"
    });
  });

  $("#refarch-button-gcp").on("click", () => {
    const tag = "Select GCP Refarch";
    const eventAction = createEventAction(tag);
    ga("send", {
      ...gaEventBaseObject,
      eventAction,
      eventLabel: "User selected GCP refarch addon"
    });
  });

  // TODO: Add Tracking for GCP AND AWS Pro Support Addon. They currently use same button so not
  // quite straightforward
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js"></script>
<!-- Hotjar Tracking Code for gruntwork.io -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:974926,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
<script>
  window.intercomSettings = {
    app_id: "rzcjacgd"
  };
</script>
<!-- Intercom -->
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/rzcjacgd';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>
<script src="{{ site.assets_base_url }}js/cookie.js" async></script>
{% endif %}
